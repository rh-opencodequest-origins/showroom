:imagesdir: ../../assets/images

= Platform Engineer Activity: Import the Software Template Quarkus-with-spring-postgresql

include::../style.adoc[]

== Role switch ! 

IMPORTANT: In this workshop, you will switch between the developer role and the platform engineer role.

++++
<div class="developer">
++++
Parts related to the developer role will be with a blue background color
++++
</div>
++++

++++
<div class="pe">
++++
Parts related to the platform engineer role will be with a red background color
++++
</div>
++++


.Click to learn how to login as a Platform Engineer
[%collapsible]
====
include::../login-pe.adoc[]
====



++++
<div class="pe">
++++

We need a template to create the essentials resources to let developer start to contribute quickly :
image:m3/template-components.png[] 


Here a grocery list : 

* Create a *Gitlab repository* with a skeleton depending on the technology stack (runtimes, database ...)
* *Pipeline* to build and test codes
* *Image registry* to store built artefacts
* *GitOps resources* to automate deployments

The template should follow the steps to accomplish the creation of the components above 

image:m4/full-steps-template.png[] 

++++
</div>
++++


NOTE: We have asked our favorite LLM to generate the template for us. We should be careful using it ... 


The Software Template you'll be using in this activity is stored in the https://gitlab-gitlab.{openshift_cluster_ingress_domain}/rh-opencodequest-origins/opencodequest-templates/tree/main/scaffolder-templates/quarkus-with-spring-postgresql[template.yaml, window="gitlab"] file in repository in GitLab.

Register this template using the {product_name_rhdh} UI:

. Login to your https://backstage-rhdh-{team-id}.{openshift_cluster_ingress_domain}/[instance of {product_name_rhdh}^, window="rhdh"] as the `{pe-username}` user with password `{common_password}`.
. Select the image:common/plus-icon.png[width=15px] icon on the top navigation bar to access the *Self-service* menu.
+
image:m3/create-icon.png[] 
. Click the *Register Existing Component* button.
+
image:m3/rhdh-catalog-create.png[The empty Create UI]
. Enter the following URL in the *Select URL* field and click *Analyze*:
+
[source,bash,role=execute,subs=attributes+]
----
https://gitlab-gitlab.{openshift_cluster_ingress_domain}/pe{team-id}/opencodequest-templates/-/blob/main/scaffolder-templates/quarkus-with-spring-postgresql/template.yaml?ref_type=heads
----
. You'll be asked to review the entities being imported, as shown:
+
image:m3/rhdh-register-template.png[Registering and Entity]
. Click *Import* when prompted.

Return to the *Catalog* section, and set the _Kind_ filter to _Template_. Your new *OpenCodeQuest - AI-Infused application with Quarkus* template will be listed. Clicking on the template reveals that it looks a lot like the Component Entity you imported in the previous module.

image:m3/template-quarkus-pg-import.png[Registering and Entity]

NOTE: Before using the Template, we'll need to explore it ...


