:imagesdir: ../../assets/images
include::../style.adoc[]

++++
<div class="pe">
++++

== Platform Engineer Activity: Correct a template


include::../style.adoc[]

Create a new software Component and supporting infrastructure using the *Quarkus Service* template that was created by the platform engineer:
NOTE: Remember, this template has been generated by an AI. Use it carefully ;) 

=== Explore the Template
. Access https://backstage-backstage.{openshift_cluster_ingress_domain}[{product_name_rhdh}^, window="rhdh"].
. Click the *Create* icon (plus symbol) in the top menu.
+
image:m3/rhdh-create.png[The {product_name_rhdh} Create UI]
. Click the *Choose* button on the *Quarkus Service*. The Template parameters collection screen will be displayed.

+
image:m3/template-quarkus-pg-fake-ai.png[] 
. Oups ! This is a template generated by an *amazing over-trained AI model*.. Hopefully, you are enough smart to correct the work did by the dummy AI !

. In Step 1, "Prompt me something". Yes , it's not releavant at all 
  * OpenShift version is not useful to onboard a developer. You should modify the template

=== Update the Template with a human touch !

. Click on the 3 dots button as shown on the picture
+

Remember Templates imported previously are located in Gitlab. We will directly edit it and commit it !

image:m3/template-quarkus-pg-fake-edit-button.png[] 


*Update the titles of form inputs*


. Find the YAML surrounded by `update the title below` and replace the title

image:m3/template-quarkus-pg-edit-title.png
  * *Prompt me something* by *OpenShift Cluster URL*


. Scroll down and enter a commit message `feat: change application title`.
. Click the *Commit changes* button.

*Refresh the template updated ...*

Templates are refreshed asynchronously by Red Hat Developer Hub. We will see how to refresh it manually.
image:/m3/template-location-steps.png[Customizing the Title]

Let's find the template to refresh !

. Step *1* - Click on *Catalog*
. Step *2* - Select *Template* type
. Step *3* - Choose the template to refresh

Let's refresh the template !

image:/m3/template-refresh-button.png[Customizing the Title]

. Click on *circle arrows*


+
image:m3/rhdh-template-quarkus-pg-refreshed.png[Reviewing template parameters in {product_name_rhdh}]

NOTE: The template definition is tied to its definition in the git repository. No GitOps mecanism involved here



*Explore a true step definition*

Remember, the platform engineering helps developers to integrate development tools configured seamessly in a project. To do so, we rely on plugins to do the job. it proposes a set of *actions*
For instance, to create a simple Gitlab repository, we use the concept of *action*    

```yaml
 - id: publish
      name: Publish
      action: publish:gitlab
      input:
        repoUrl: "${{ parameters.repo.host }}.${{ parameters.openshiftCluster }}?owner=${{ user.entity.metadata.name }}&repo=${{parameters.component_id}}"
        repoVisibility: public
```
The *repoUrl* is built with informations set in the form. The repository will be created with in Gitlab user space *user.entity.metadata.name* and the repository name will be *component_id* set in the Java Package Information section


*Explore the Software Catalog AKA catalog-info.yaml*


As the platform engineering is the entrypoint for project developments, get the right overview of objects created, integrations performed is paramount !
This is why the *Sofware Catalog* exists ! A clear definition of UI elements based on external tools involved in the development project. For instance, pipeline status, source code repositories, registry shortcuts ...

```yaml
 - id: register
      name: Register
      action: catalog:register
      input:
        repoContentsUrl: ${{ steps.publish.output.repoContentsUrl }}
        catalogInfoPath: "/catalog-info.yaml"
```
The template creates a *Software Catalog* thanks to this action in the git repository where your project will live. It will be updatable by developers. We will see how later ..
Check the content here : -> https://gitlab-gitlab.{openshift_cluster_ingress_domain}/rhdh/template-quarkus-simple/-/blob/main/template.yaml[template.yaml, window="gitlab"].


Link to Module 02.1 maybe ?
Find more informations about the sofware catalog : https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.6/html/customizing_red_hat_developer_hub/about-software-catalogs 





=== Summary

Nice work! You created a new Component and associated source code from a Software Template.

In the next section you'll learn how to enable and disable different plugin integrations with your Components, using OpenShift GitOps (Argo CD) as an example.


++++
</div>
++++